<!DOCTYPE html>
<html lang="ja-jp" dir="ltr">
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>ゲームパッド入力について | Godot Japan</title>

      <link rel="stylesheet" href="/css/main.min.31b9689d1dee9dee8eebdec0725b3be10c75a72fe10d890488a2c4dc7ffc7018.css" integrity="sha256-MblonR3une6O697Acls74Qx1py/hDYkEiKLE3H/8cBg=" crossorigin="anonymous">


      <script src="/js/main.23cd0c7d837263b9eaeb96ee2d9ccfa2969daa3fa00fa1c1fe8701a9b87251a1.js" integrity="sha256-I80MfYNyY7nq65buLZzPopadqj&#43;gD6HB/ocBqbhyUaE=" crossorigin="anonymous"></script>


<script type="text/javascript">
	var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
	var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
	return new bootstrap.Tooltip(tooltipTriggerEl)
	})
	fluentemoji.parse('.reference-emoji');
</script>
<link rel="alternate" type="application/rss+xml" href="/news/index.xml" title="Godot Japan News">

</head>
<body class="base-background-color">

  <header class="sticky-top m-0">
    <nav class="navbar navbar-expand-lg navbar-light fixed-top mask-custom shadow-sm m-0 p-0">
  <div class="container-fluid">
    <a href="/" class="navbar-brand col">
      <img src="/img/logo_godot_japan.png" alt="Godot Japan" class="my-2"
      style="height:100%; width:100%; max-height:48px; object-fit:contain; object-position:left;">
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link" aria-current="page" href="/about">Godot Japanについて</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://forum.godot-japan.com/">フォーラム</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/news">ニュース</a>
        </li>
        
        <li class="nav-item">
          <a class="nav-link" href="/contact">お問い合わせ</a>
        </li>
        <a href="/donate" class="btn btn-danger mx-3 mt-3 mt-lg-0 shadow-animation text-light">
          <i class="bi bi-chat-heart-fill"></i> Donate
        </a>
      </ul>
    </div>
  </div>
</nav>
  

  </header>
  
  <main style="padding-top:100px;">
	
	<div class="container rounded-3 px-lg-3 mb-3">
		<div class="col col-lg-10 mx-auto bg-light rounded-3 p-3">
			
			
			<hgroup class="fw-bolder">
				<h2 class="news-title h1 p-3 fw-bolder">
					ゲームパッド入力について
				</h2>
				
				
				<div class="row container">
					<p class="h5 col fw-bold">
						<span class="text-secondary fw-bolder">By : </span>
						
						
						<span class="news-author">Saitos</span>
					</p>
				</div>
				
			</hgroup>
			
			
				
			<div class="post-content my-3 p-3 rounded-3 bg-light">
				<h1 id="ゲームパッドとアクションの登録">ゲームパッドとアクションの登録</h1>
<p><a href="/reference/%E5%85%A5%E5%8A%9B%E3%83%87%E3%83%90%E3%82%A4%E3%82%B9%E9%96%A2%E9%80%A3/%E5%85%A5%E5%8A%9B%E6%A9%9F%E8%83%BD%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6">入力機能について</a>で解説している通り、Godot Engineではアクションに対して複数の入力を登録することができます。<br>
これにより、コードからはキーボードとゲームパッドの操作を、どちらも同じアクションで参照することができます。</p>
<p>このページでは、ゲームパッドに関連する操作やコードを解説していきます。</p>
<h1 id="ゲームパッドの状態取得">ゲームパッドの状態取得</h1>
<h2 id="ゲームパッドが認識されているか取得">ゲームパッドが認識されているか取得</h2>
<p>ゲームパッドがシステムに認識されているかどうかを判別します。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#a6e22e">is_joy_known</span>(<span style="color:#ae81ff">0</span>):
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;デバイス0のゲームパッドが正常に認識されています。&#34;</span>)
</span></span></code></pre></div><p>システムが認識している状態であれば、<a href="https://docs.godotengine.org/ja/stable/classes/class_%40globalscope.html#enum-globalscope-joysticklist">グローバルスコープのJoystickList</a>に定義されたゲームパッドの入力の値を正常に取得できます。</p>
<h2 id="切断接続の状態を取得する">切断・接続の状態を取得する</h2>
<p>ゲームパッドの接続状態が変わったことを通知するシグナルがあります。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">_ready</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Input</span><span style="color:#f92672">.</span>joy_connection_changed<span style="color:#f92672">.</span><span style="color:#a6e22e">connect</span>(_on_joy_connection_changed)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">_on_joy_connection_changed</span>(device:<span style="color:#66d9ef">int</span>, connected:<span style="color:#66d9ef">bool</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> connected:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;デバイス</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">のゲームパッドが切断されました&#34;</span> <span style="color:#f92672">%</span> str(device))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> connected:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;デバイス</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">のゲームパッドが接続されました&#34;</span> <span style="color:#f92672">%</span> str(device))
</span></span></code></pre></div><h1 id="ゲームパッドの入力取得">ゲームパッドの入力取得</h1>
<h2 id="スティックの傾きを取得">スティックの傾きを取得</h2>
<p>各アクションにゲームパッドの左スティックの上下左右方向を<code>move_right</code>, <code>move_left</code>, <code>move_up</code>, <code>move_down</code>として定義し、以下のように<strong>アクションから方向を取得</strong>します。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> value :<span style="color:#a6e22e">Vector2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Input</span><span style="color:#f92672">.</span><span style="color:#a6e22e">get_vector</span>(<span style="color:#e6db74">&#34;move_right&#34;</span>, <span style="color:#e6db74">&#34;move_left&#34;</span>, <span style="color:#e6db74">&#34;move_up&#34;</span>, <span style="color:#e6db74">&#34;move_down&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(str(value)) <span style="color:#75715e"># [-1.0, -1.0] ~ [0, 0] ~ [1.0, 1.0]</span>
</span></span></code></pre></div><h2 id="ボタン入力を取得">ボタン入力を取得</h2>
<p>通常は<code>is_action_pressed()</code>などを使用して<strong>アクションでの入力判定</strong>を行うことがほとんどですが、ゲームパッドのボタン入力を個別に取得したい場合は以下のように取得できます。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#a6e22e">Input</span><span style="color:#f92672">.</span><span style="color:#a6e22e">is_joy_button_pressed</span>(<span style="color:#ae81ff">0</span>, JOY_DS_A):
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;Nintendo規格のAボタンに値するボタンが押されている&#34;</span>)
</span></span></code></pre></div><p><a href="https://docs.godotengine.org/ja/stable/classes/class_%40globalscope.html#enum-globalscope-joysticklist">グローバルスコープのJoystickList</a>に定義されたゲームパッドの入力の値を第2引数に指定します。</p>
<h2 id="ジャイロスコープセンサーの取得">ジャイロスコープセンサーの取得</h2>
<aside class="msg">
    <span class="msg-symbol">!</span>
    <div class="msg-content">
        現在標準のエンジンの機能として、iOS・Android以外のジャイロスコープセンサーの取得はできないようです。<br>
GDExtensionなどの拡張で取得することは可能です。
    </div>
</aside>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/3oHbdXnPGd0?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<h1 id="ゲームパッドへの命令">ゲームパッドへの命令</h1>
<h2 id="バイブレーションの設定">バイブレーションの設定</h2>
<p><code>start_joy_vibration(デバイス, 弱振動値, 強振動値, 振動時間)</code>で設定します。<br>
ゲームパッドのバイブレーションは2個のモーターがあり、それぞれのモーターの強さを<code>0-1</code>の値で設定することができます。<br>
これらの振動値を動的に変更する場合は<code>start_joy_vibration()</code>メソッドを変化の回数分実行することで実装可能です。</p>
<p><code>振動時間</code>は<code>0</code>を設定することで、無限に振動しようとします。<br>
すべてのデバイスが長時間振動できるわけではありませんので、長時間振動させたい場合は、繰り返し実行します。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#75715e"># バイブレーションフラグ</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> is_vibrate:<span style="color:#66d9ef">bool</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">_process</span>(_delta):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">get_joy_vibration_duration</span>(<span style="color:#ae81ff">0</span>) <span style="color:#f92672">=&lt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">and</span> is_vibrate:
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Input</span><span style="color:#f92672">.</span><span style="color:#a6e22e">start_joy_vibration</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0.4</span>, <span style="color:#ae81ff">0.2</span>) <span style="color:#75715e"># バイブレーション開始</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> <span style="color:#a6e22e">get_joy_vibration_duration</span>(<span style="color:#ae81ff">0</span>) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1000.0</span>:
</span></span><span style="display:flex;"><span>        is_vibrate <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Input</span><span style="color:#f92672">.</span><span style="color:#a6e22e">stop_joy_vibration</span>(<span style="color:#ae81ff">0</span>) <span style="color:#75715e"># バイブレーションを止める</span>
</span></span></code></pre></div>
			</div>

			
			<hr>
			<h4><a data-bs-toggle="tooltip" data-bs-placement="top" title="記事についてのディスカッション">💬 Giscus</a></h4>
			<div class="giscus">
				<script src="https://giscus.app/client.js"
					data-repo="godot-jp/godot-jp.github.io"
					data-repo-id="R_kgDOIicNHA"
					data-category="Announcements"
					data-category-id="DIC_kwDOIicNHM4CS2uB"
					data-mapping="title"
					data-strict="0"
					data-reactions-enabled="1"
					data-emit-metadata="0"
					data-input-position="bottom"
					data-theme="preferred_color_scheme"
					data-lang="ja"
					crossorigin="anonymous"
					async>
				</script>
			</div>
			
		</div>
	</div>
	
	

  </main>

  <footer class="footer w-100">
    <div class=" mt-5 d-flex flex-column align-content-stretch">
	<div class="row row-cols-1 row-cols-md-3 row-cols-lg-4 container mx-auto footer-description  align-content-stretch">
		<div class="col">
			<p class="h3 text-light">Godot Japan</p>
			<p>
				国内最大級のGodot Engine日本コミュニティです。ユーザー同士のコミュニケーションをサポートし、快適にGodot Engineをご活用いただくために活動を行っています。
			</p>
		</div>
		<div class="col">
			<p class="h5 text-light">ユーザーコミュニティ</p>
			<ul class="list-inline">
				<li><a href="/about">Godot Japanについて</a></li>
				<li><a href="https://discord.gg/DyFvSJZ">Discordサーバーに参加する</a></li>
				<li><a href="/news">ニュース</a></li>
				<li><a href="/reference">逆引きリファレンス</a></li>
				<li><a href="/links">ユーザーリンク</a></li>
			</ul>
		</div>
		<div class="col">
			<p class="h5 text-light">フォーラム</p>
			<ul class="list-inline">
				<li><a href="https://forum.godot-japan.com/faq">FAQ＆ガイドライン</a></li>
				<li><a href="https://forum.godot-japan.com/t/topic/35">フォーラムの便利な使い方</a></li>
				<li><a href="https://forum.godot-japan.com/privacy">プライバシーポリシー</a></li>
			</ul>
		</div>
		<div class="col">
			<p class="h5 text-light">運営</p>
			<ul class="list-inline">
				<li><a href="/about#運営組織について">運営組織について</a></li>
				<li><a href="/donate">寄付</a></li>
				<li><a href="/contact">お問い合わせ</a></li>
				<li><a href="/press">プレスキット</a></li>
			</ul>
		</div>
	</div>
	<div class="text-center copyright d-flex justify-content-center align-content-end">
		<small class="p-2 d-block">
			© Godot Japan 2020-2024. Hosted by <a href="https://ahead-studio.com/">Ahead Studio</a>. Website source code on <a href="https://github.com/godot-jp/godot-jp.github.io">Github</a>
		</small>
	</div>
</div>
  </footer>

</body>
</html>